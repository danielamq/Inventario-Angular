"use strict";(self.webpackChunkinventory=self.webpackChunkinventory||[]).push([[900],{1900:(nt,_,c)=>{c.r(_),c.d(_,{InventoryModule:()=>tt});var v=c(9808),g=c(1083),l=c(3075),C=c(7423),I=c(4449),b=c(2181),x=c(4107),P=c(2638),T=c(5245),h=c(7531),y=c(6087),A=c(4594),s=c(7322),d=c(4999),p=c(8966),N=c(6856),Z=c(7238),f=c(5861),S=c(4847),U=c(5226),u=c.n(U);class F{}var t=c(5e3),M=c(3084);let J=(()=>{class n{constructor(o,e,a){this.dialogRef=o,this.data=e,this.inventoryService=a,this.nuevoProducto=new F,this.sAccionModal="",this.sAccionModal=0==this.data.accion?"Agregar":"Editar",console.log(this.sAccionModal)}ngOnInit(){1===this.data.accion&&this.inventoryService.obtenerProductoPorId(this.data.nIdProducto).subscribe({next:o=>{this.nuevoProducto=o},error:o=>{console.error("\u274c Error al cargar producto:",o),u().fire("Error","No se pudieron cargar los datos del producto","error")}})}crearProducto(){var o=this;return(0,f.Z)(function*(){0===o.data.accion?o.inventoryService.crearProducto(o.nuevoProducto).subscribe({next:e=>{u().fire({title:"Producto creado con \xe9xito",text:"El producto se ha registrado correctamente.",icon:"success",timer:2500,showConfirmButton:!1}),o.fnCerrarModal(1)},error:e=>{console.error("\u274c Error al crear producto:",e),u().fire("Error","No se pudo crear el producto. Intenta nuevamente.","error")}}):1===o.data.accion&&(console.log("ID EN DATA",o.data.nIdProducto),o.inventoryService.actualizarProducto(o.data.nIdProducto,o.nuevoProducto).subscribe({next:e=>{u().fire({title:"Producto actualizado con \xe9xito",text:"El producto se ha modificado correctamente.",icon:"success",timer:2500,showConfirmButton:!1}),o.fnCerrarModal(1)},error:e=>{console.error("\u274c Error al actualizar producto:",e),u().fire("Error","No se pudo actualizar el producto. Intenta nuevamente.","error")}}))})()}fnCerrarModal(o){1===o?this.dialogRef.close(o):this.dialogRef.close()}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(p.so),t.Y36(p.WI),t.Y36(M.V))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-inventory-form"]],decls:47,vars:8,consts:[["mat-dialog-title","",1,"clstitulo"],["autocomplete","off","name","Formulario","id","new-form"],[1,"col-md-12"],[2,"display","initial"],["matInput","","type","text","maxlength","50","autocomplete","nope","name","nombre",3,"ngModel","ngModelChange"],[1,"col-md-12","justify-content-center"],["matInput","","type","text","name","costo",3,"ngModel","ngModelChange"],["matInput","","type","number","autocomplete","nope","name","porcentajeMayorista",3,"ngModel","ngModelChange"],["matInput","","type","number","autocomplete","nope","name","porcentajeDetal",3,"ngModel","ngModelChange"],["matInput","","type","number","autocomplete","nope","name","cantidadReal",3,"ngModel","ngModelChange"],["matInput","","type","number","autocomplete","nope","name","cantidadConsignacion",3,"ngModel","ngModelChange"],["matInput","","type","number","autocomplete","nope","name","descuentoAdicional",3,"ngModel","ngModelChange"],[1,"row",2,"padding-top","1rem"],[1,"col-md-6"],["type","button","color","primary","mat-raised-button","",2,"width","100%",3,"click"],["type","button","color","warn","mat-raised-button","",2,"width","100%",3,"click"]],template:function(o,e){1&o&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.qZA(),t.TgZ(3,"form",1)(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),t._uU(7,"Nombre Producto"),t.qZA(),t.TgZ(8,"input",4),t.NdJ("ngModelChange",function(i){return e.nuevoProducto.nombre=i}),t.qZA()()(),t.TgZ(9,"div",5)(10,"mat-form-field",3)(11,"mat-label"),t._uU(12,"Costo"),t.qZA(),t.TgZ(13,"textarea",6),t.NdJ("ngModelChange",function(i){return e.nuevoProducto.costo=i}),t._uU(14,"                    "),t.qZA()()(),t.TgZ(15,"div",2)(16,"mat-form-field",3)(17,"mat-label"),t._uU(18,"Porcentaje Mayorista"),t.qZA(),t.TgZ(19,"input",7),t.NdJ("ngModelChange",function(i){return e.nuevoProducto.porcentajeMayorista=i}),t.qZA()()(),t.TgZ(20,"div",2)(21,"mat-form-field",3)(22,"mat-label"),t._uU(23,"porcentaje Detal"),t.qZA(),t.TgZ(24,"input",8),t.NdJ("ngModelChange",function(i){return e.nuevoProducto.porcentajeDetal=i}),t.qZA()()(),t.TgZ(25,"div",2)(26,"mat-form-field",3)(27,"mat-label"),t._uU(28,"Cantidad en bodega"),t.qZA(),t.TgZ(29,"input",9),t.NdJ("ngModelChange",function(i){return e.nuevoProducto.cantidadReal=i}),t.qZA()()(),t.TgZ(30,"div",2)(31,"mat-form-field",3)(32,"mat-label"),t._uU(33,"Cantidad Consignada"),t.qZA(),t.TgZ(34,"input",10),t.NdJ("ngModelChange",function(i){return e.nuevoProducto.cantidadConsignacion=i}),t.qZA()()(),t.TgZ(35,"div",2)(36,"mat-form-field",3)(37,"mat-label"),t._uU(38,"Descuento Adicional"),t.qZA(),t.TgZ(39,"input",11),t.NdJ("ngModelChange",function(i){return e.nuevoProducto.descuentoAdicional=i}),t.qZA()()(),t.TgZ(40,"div",12)(41,"div",13)(42,"button",14),t.NdJ("click",function(){return e.crearProducto()}),t._uU(43,"Grabar"),t.qZA()(),t.TgZ(44,"div",13)(45,"button",15),t.NdJ("click",function(){return e.fnCerrarModal(0)}),t._uU(46,"Cancelar"),t.qZA()()()()()),2&o&&(t.xp6(2),t.hij("",e.sAccionModal," Producto"),t.xp6(6),t.Q6J("ngModel",e.nuevoProducto.nombre),t.xp6(5),t.Q6J("ngModel",e.nuevoProducto.costo),t.xp6(6),t.Q6J("ngModel",e.nuevoProducto.porcentajeMayorista),t.xp6(5),t.Q6J("ngModel",e.nuevoProducto.porcentajeDetal),t.xp6(5),t.Q6J("ngModel",e.nuevoProducto.cantidadReal),t.xp6(5),t.Q6J("ngModel",e.nuevoProducto.cantidadConsignacion),t.xp6(5),t.Q6J("ngModel",e.nuevoProducto.descuentoAdicional))},directives:[p.uh,l._Y,l.JL,l.F,s.KE,s.hX,h.Nt,l.Fj,l.nD,l.JJ,l.On,l.wV,C.lW],styles:[".clstitulo[_ngcontent-%COMP%]{background-color:#334d6e;color:#fff;text-align:center;border-radius:calc(.25rem - 1px) calc(.25rem - 1px) 0 0;height:3rem;padding-top:.5rem}@media (min-width: 700px){.selectResp[_ngcontent-%COMP%]{bottom:.75rem}.pb-1[_ngcontent-%COMP%]{padding-bottom:1rem!important}}.selectMat[_ngcontent-%COMP%]{display:initial}"]}),n})();function L(n,r){if(1&n){const o=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){return t.CHM(o),t.oxw().fnClearFilter()}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function w(n,r){1&n&&(t.TgZ(0,"th",29),t._uU(1,"Producto"),t.qZA())}function D(n,r){if(1&n&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&n){const o=r.$implicit;t.xp6(1),t.Oqu(o.nombre)}}function B(n,r){1&n&&(t.TgZ(0,"th",29),t._uU(1,"Costo"),t.qZA())}function E(n,r){if(1&n&&(t.TgZ(0,"td",30),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&n){const o=r.$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,o.costo,"COP","symbol"))}}function O(n,r){1&n&&(t.TgZ(0,"th",29),t._uU(1,"Cantidad Bodega"),t.qZA())}function q(n,r){if(1&n&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&n){const o=r.$implicit;t.xp6(1),t.Oqu(o.cantidadReal)}}function R(n,r){1&n&&(t.TgZ(0,"th",29),t._uU(1,"Cantidad Consignaci\xf3n"),t.qZA())}function k(n,r){if(1&n&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&n){const o=r.$implicit;t.xp6(1),t.Oqu(o.cantidadConsignacion)}}function Y(n,r){1&n&&(t.TgZ(0,"th",29),t._uU(1,"Precio Mayorista"),t.qZA())}function Q(n,r){if(1&n&&(t.TgZ(0,"td",30),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&n){const o=r.$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,o.precioMayorista,"COP","symbol"))}}function z(n,r){1&n&&(t.TgZ(0,"th",29),t._uU(1,"Precio Detal"),t.qZA())}function j(n,r){if(1&n&&(t.TgZ(0,"td",30),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&n){const o=r.$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,o.precioDetal,"COP","symbol"))}}function H(n,r){1&n&&(t.TgZ(0,"th",31),t._uU(1,"Acciones"),t.qZA())}function $(n,r){if(1&n){const o=t.EpF();t.TgZ(0,"td",30)(1,"button",32),t.NdJ("click",function(){const i=t.CHM(o).$implicit;return t.oxw().fnFormModal(1,i.id)}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()(),t.TgZ(4,"button",33),t.NdJ("click",function(){const i=t.CHM(o).$implicit;return t.oxw().fnCambiarStock(i.id,i.cantidadReal)}),t.TgZ(5,"mat-icon"),t._uU(6,"assignment_add"),t.qZA()(),t.TgZ(7,"button",34),t.NdJ("click",function(){const i=t.CHM(o).$implicit;return t.oxw().fnEliminarProducto(i.id)}),t.TgZ(8,"mat-icon"),t._uU(9,"delete"),t.qZA()()()}}function G(n,r){1&n&&t._UZ(0,"tr",35)}function X(n,r){1&n&&t._UZ(0,"tr",36)}const V=function(){return[10,25,100]},W=[{path:"",component:(()=>{class n{constructor(){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-inventory"]],decls:1,vars:0,template:function(o,e){1&o&&t._UZ(0,"router-outlet")},directives:[g.lC],encapsulation:2}),n})(),children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class n{constructor(o,e){this.inventoryService=o,this.dialog=e,this.appName="Gesti\xf3n de Inventario",this.txtFiltro=new l.NI(""),this.displayedColumns=["nombre","costo","cantidadReal","cantidadConsignacion","precioMayorista","precioDetal","acciones"],this.dataSource=new d.by,this.dataSource=new d.by,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}ngOnInit(){this.listarProductos()}fnClearFilter(){var o=this;return(0,f.Z)(function*(){o.dataSource&&(o.dataSource.filter="")})()}applyFilter(o){this.dataSource.filter=o.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}listarProductos(){this.inventoryService.listarProductos().subscribe({next:o=>{this.dataSource.data=o,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort},error:o=>{console.error("\u274c Error al listar productos",o),u().fire("Error","No se pudieron cargar los productos","error")}})}fnFormModal(o,e){var a=this;return(0,f.Z)(function*(){a.accionActual=o,a.dialog.open(J,{width:"50rem",disableClose:!0,data:{accion:o,nIdProducto:e}}).afterClosed().subscribe(m=>{void 0!==m&&a.listarProductos()})})()}fnCambiarStock(o,e){var a=this;return(0,f.Z)(function*(){const{value:i}=yield u().fire({title:"Agregar stock",icon:"question",input:"number",inputPlaceholder:`En este momento hay ${e}`,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar"});if(!i)return;const m=parseInt(i,10);a.inventoryService.actualizarStock(o,m).subscribe({next:()=>{u().fire({title:"Stock actualizado con \xe9xito",icon:"success",timer:2500,showConfirmButton:!1}),a.listarProductos()},error:ot=>{console.error("\u274c Error al actualizar stock:",ot),u().fire({title:"Error",text:"No se pudo actualizar el stock. Intenta nuevamente.",icon:"error"})}})})()}fnEliminarProducto(o){var e=this;return(0,f.Z)(function*(){!(yield u().fire({title:"\xbfEst\xe1 seguro?",text:"Esta acci\xf3n eliminar\xe1 el producto de forma permanente.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, eliminar",cancelButtonText:"Cancelar"})).isConfirmed||e.inventoryService.eliminarProducto(o).subscribe({next:()=>{u().fire({title:"Producto eliminado",text:"El producto ha sido eliminado correctamente.",icon:"success",timer:2500,showConfirmButton:!1}),e.listarProductos()},error:i=>{console.error("\u274c Error al eliminar producto:",i),u().fire({title:"Error",text:"No se pudo eliminar el producto. Intenta nuevamente.",icon:"error",confirmButtonText:"Aceptar"})}})})()}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(M.V),t.Y36(p.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-inventory-list"]],viewQuery:function(o,e){if(1&o&&(t.Gf(y.NW,5),t.Gf(S.YE,5)),2&o){let a;t.iGM(a=t.CRH())&&(e.paginator=a.first),t.iGM(a=t.CRH())&&(e.sort=a.first)}},decls:43,vars:8,consts:[[1,"nav-container-general"],[1,"header-app"],[2,"font-weight","bold"],[1,"fab-container"],["matTooltipPosition","left","mat-raised-button","","mat-mini-fab","","color","primary","matTooltip","Agregar Producto",1,"fab-secondary",3,"click"],[1,"material-icons"],[1,"form","row"],[1,"col-md-10"],["appearance","standard",2,"width","80%"],["matInput","",3,"formControl","keyup"],["input",""],["style","outline: none;","mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["id","listaMobile",1,"mat-elevation-z8"],[1,"example-container"],["mat-table","","matSort","","aria-describedby","TablaProducto",2,"width","100%",3,"dataSource"],["matColumnDef","nombre"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","costo"],["matColumnDef","cantidadReal"],["matColumnDef","cantidadConsignacion"],["matColumnDef","precioMayorista"],["matColumnDef","precioDetal"],["matColumnDef","acciones"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",2,"outline","none",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","","color","primary","matTooltip","Editar Producto",3,"click"],["mat-icon-button","","color","accent","matTooltip","Agregar Stock",3,"click"],["color","warn","mat-icon-button","","matTooltip","Eliminar producto",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3),t.qZA()(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return e.fnFormModal(0,0)}),t.TgZ(6,"span",5),t._uU(7,"add"),t.qZA()()(),t.TgZ(8,"div",6)(9,"div",7)(10,"mat-form-field",8)(11,"mat-label"),t._uU(12,"Buscar Producto"),t.qZA(),t.TgZ(13,"input",9,10),t.NdJ("keyup",function(i){return e.applyFilter(i)}),t.qZA(),t.YNc(15,L,3,0,"button",11),t.qZA()()(),t.TgZ(16,"div",12)(17,"div",13)(18,"table",14),t.ynx(19,15),t.YNc(20,w,2,0,"th",16),t.YNc(21,D,2,1,"td",17),t.BQk(),t.ynx(22,18),t.YNc(23,B,2,0,"th",16),t.YNc(24,E,3,5,"td",17),t.BQk(),t.ynx(25,19),t.YNc(26,O,2,0,"th",16),t.YNc(27,q,2,1,"td",17),t.BQk(),t.ynx(28,20),t.YNc(29,R,2,0,"th",16),t.YNc(30,k,2,1,"td",17),t.BQk(),t.ynx(31,21),t.YNc(32,Y,2,0,"th",16),t.YNc(33,Q,3,5,"td",17),t.BQk(),t.ynx(34,22),t.YNc(35,z,2,0,"th",16),t.YNc(36,j,3,5,"td",17),t.BQk(),t.ynx(37,23),t.YNc(38,H,2,0,"th",24),t.YNc(39,$,10,0,"td",17),t.BQk(),t.YNc(40,G,1,0,"tr",25),t.YNc(41,X,1,0,"tr",26),t.qZA(),t._UZ(42,"mat-paginator",27),t.qZA()()()),2&o&&(t.xp6(3),t.Oqu(e.appName),t.xp6(10),t.Q6J("formControl",e.txtFiltro),t.xp6(2),t.Q6J("ngIf",e.txtFiltro.value),t.xp6(3),t.Q6J("dataSource",e.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(7,V)))},directives:[C.lW,Z.gM,s.KE,s.hX,h.Nt,l.Fj,l.JJ,l.oH,v.O5,s.R9,T.Hw,d.BZ,d.w1,d.fO,d.ge,d.Dz,d.ev,d.as,d.XQ,d.nj,d.Gk,y.NW],pipes:[v.H9],styles:["table[_ngcontent-%COMP%]{width:100%}.header-app[_ngcontent-%COMP%]{text-align:center;margin-top:1rem}h1[_ngcontent-%COMP%]{margin-bottom:0}.example-container[_ngcontent-%COMP%]{width:100%;overflow:auto}.clsColumnaNombre[_ngcontent-%COMP%]{width:20%}.clsColumnaDescripcion[_ngcontent-%COMP%]{width:35%}.clsColumnaStock[_ngcontent-%COMP%]{width:15%}.clsColumnaAccion[_ngcontent-%COMP%]{width:20%}"]}),n})(),data:{route:"inventory/list"}}]}];let K=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.Bz.forChild(W)],g.Bz]}),n})(),tt=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[v.ez,K,I.ie,b.Tx,x.LD,P.SJ,l.u5,l.UX,T.Ps,h.c,y.TU,A.g0,C.ot,s.lN,d.p0,p.Is,N.FA,Z.AV],g.Bz]}),n})()}}]);